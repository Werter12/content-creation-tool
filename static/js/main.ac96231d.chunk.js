(this["webpackJsonpcontent-creation-tool"]=this["webpackJsonpcontent-creation-tool"]||[]).push([[0],{244:function(e,t,n){},245:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),i=n.n(c),u=(n(244),n(245),n(87)),o=n(32),s=n(22),l=n(391),d=n(394),j=n(389),b=n(390),O=n(393),f=n(392),g=n(63),h="LIST_IMAGES",v="LIST_IMAGES_RESULT",m="LIST_IMAGES_FAIL",p="GET_IMAGE",x="GET_IMAGE_RESULT",w="GET_IMAGE_FAIL",I="UPDATE_DRAFT_IMAGE",y="SET_DRAFT_IMAGE";function S(e){return{type:v,loading:!1,images:e}}function E(e){return{type:x,loading:!1,draftImage:e}}function _(){return{type:"EMPTY_EVENT"}}var k=n(111),T=n(29),A=n.n(T),C=n(28),L=n(58),N=n(215),G=n.n(N),M="https://picsum.photos";function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];console.log("Saga Error: ",n,e)}var F=function(e){return e.substring(0,e.lastIndexOf("/"))},P=function(e){var t=new URL(e);return"".concat(t.origin).concat(F(F(t.pathname)),"/200").concat(t.search)},U=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.apply(void 0,[e,a].concat(n));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,C.a.apply(void 0,[R,t.t0].concat(n));case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))};function V(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return A.a.mark((function u(){var o,s,l,d=arguments;return A.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(o=d.length>0&&void 0!==d[0]?d[0]:null,u.prev=1,!r||!c){u.next=5;break}return u.next=5,Object(C.a)(r,c);case 5:return u.next=7,Object(C.a)(e,o);case 7:if(s=u.sent,!(l=s.data)){u.next=12;break}return u.next=12,Object(C.b)(t(l));case 12:if(!a){u.next=15;break}return u.next=15,Object(C.a)(a,l);case 15:return u.abrupt("return",l);case 18:return u.prev=18,u.t0=u.catch(1),u.next=22,Object(C.b)(n(u.t0));case 22:if(!i){u.next=25;break}return u.next=25,Object(C.a)(i);case 25:case"end":return u.stop()}}),u,null,[[1,18]])}))}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return function(n){var a=n.queryParams,r=n.urlPath;return G.a[t]("".concat(M).concat(e).concat(r?"/".concat(r):""),a?{params:a}:void 0)}},z=function(e){var t=e.width,n=e.height,a=e.url,r=Object(k.a)(e,["width","height","url"]);return Object(s.a)({url:"".concat(a).concat(t?"/".concat(t):"").concat(n?"/".concat(n):"")},r)},B=function(e,t){var n=t.id,a=(t.url,Object(k.a)(t,["id","url"]));return Object(s.a)({url:"".concat(e).concat(n?"/id/".concat(n):"")},a)},J=function(e){var t=e.grayscale,n=e.url,a=Object(k.a)(e,["grayscale","url"]);return Object(s.a)({url:"".concat(n).concat(t?"?grayscale":""),grayscale:t},a)},K=function(e){var t=e.blur,n=e.url,a=e.grayscale,r=Object(k.a)(e,["blur","url","grayscale"]);return t>10&&t<1?Object(s.a)({url:n},r):Object(s.a)({url:"".concat(n).concat(t?"".concat(a?"&":"?","blur=").concat(t):"")},r)},$=function(e){return e.url},q="START_SAVE_TO_STORAGE",X="SAVE_TO_STORAGE",H="GET_FROM_STORAGE";function W(e){return{type:X,savedImages:e}}var Y=n(399),Q=n(397),Z=n(8);var ee=function(){return Object(Z.jsx)(j.a,{children:Object(Z.jsxs)(b.a,{children:[Object(Z.jsx)(Y.a.Image,{}),Object(Z.jsx)("br",{}),Object(Z.jsx)(Q.a.Text,{children:" No such image"})]})})},te=n(396),ne=n(398),ae=n(401),re=n(402),ce=n(94),ie=n(174),ue=Q.a.Link;function oe(e){return se.apply(this,arguments)}function se(){return(se=Object(ie.a)(A.a.mark((function e(t){var n,a,r,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:a=e.sent,r=URL.createObjectURL(a),(c=document.createElement("a")).href=r,c.download="".concat(t,".jpg"),document.body.appendChild(c),c.click(),document.body.removeChild(c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){var t=e.imageUrl;return Object(Z.jsx)(ue,{href:"#",onClick:function(){var e=Object(ie.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,oe(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Download"})},de=Q.a.Paragraph,je=Q.a.Title,be={blur:{range:"${label} must be between ${min} and ${max}"}};var Oe=function(e){var t,n,a=e.draftImage,r=e.onFinish,c=e.onValuesChange,i=e.donwloadImageUrl;return Object(Z.jsxs)(b.a,{xs:24,md:12,children:[Object(Z.jsx)(je,{level:2,children:"Edit"}),Object(Z.jsxs)(de,{children:["Author: ",a.author]}),Object(Z.jsxs)(te.a,{name:"edit-image",onFinish:r,validateMessages:be,onValuesChange:c,initialValues:{width:a.width,height:a.height,blur:null!==(t=a.blur)&&void 0!==t?t:0,grayscale:null!==(n=a.grayscale)&&void 0!==n&&n},children:[Object(Z.jsx)(te.a.Item,{name:"width",label:"Width",children:Object(Z.jsx)(ne.a,{})}),Object(Z.jsx)(te.a.Item,{name:"height",label:"Height",children:Object(Z.jsx)(ne.a,{})}),Object(Z.jsx)(te.a.Item,{label:"Switch",name:"grayscale",valuePropName:"checked",children:Object(Z.jsx)(ae.a,{})}),Object(Z.jsx)(te.a.Item,{name:"blur",label:"Blur",rules:[{type:"number",min:0,max:10}],children:Object(Z.jsx)(ne.a,{})}),Object(Z.jsxs)(re.b,{direction:"vertical",size:"large",children:[Object(Z.jsx)(le,{imageUrl:i}),Object(Z.jsx)(te.a.Item,{children:Object(Z.jsx)(ce.a,{type:"primary",htmlType:"submit",children:"Save"})})]})]})]})},fe=l.a.Content,ge=function(){var e=Object(g.b)(),t=Object(o.f)(),n=Object(o.h)().imageId,r=Object(g.c)((function(e){var t,a;return(null===(t=e.content)||void 0===t||null===(a=t.draftImage)||void 0===a?void 0:a.id)===n?e.content.draftImage:null})),c=Object(g.c)((function(e){return e.content.loading}));Object(a.useEffect)((function(){var t;r||e((t="/".concat(n,"/info"),{type:p,loading:!0,urlPath:t}))}),[r,n,e]);var i,u=(i=null!==r&&void 0!==r?r:{},Object(L.c)($,K,J,z,B)(M,i));return Object(Z.jsxs)(l.a,{className:"page",children:[Object(Z.jsx)(d.a,{title:"Image with ".concat(n," id"),onBack:function(){return t.goBack()}}),Object(Z.jsx)(fe,{className:"content",children:r?Object(Z.jsxs)(j.a,{gutter:[34,16],children:[Object(Z.jsx)(b.a,{xs:24,md:12,className:"page-image-wrapper",children:Object(Z.jsx)(O.a,{className:"page-image",src:u,placeholder:!0})}),Object(Z.jsx)(Oe,{draftImage:r,onFinish:function(t){var n;e((n=Object(s.a)(Object(s.a)(Object(s.a)({},r),t),{},{download_url:u}),{type:q,image:n}))},onValuesChange:function(t){t.blur<0||t.blur>10||e(function(e){return{type:I,draftImage:e}}(t))},donwloadImageUrl:u})]}):c?Object(Z.jsx)(f.a,{size:"large"}):Object(Z.jsx)(ee,{})})]})},he=n(178),ve=n(400),me=n(395),pe=n(78),xe=n(228);var we=function(e){var t=e.image,n=e.onImageLinkClick;return Object(Z.jsxs)(b.a,{children:[Object(Z.jsx)("p",{children:t.author}),Object(Z.jsx)(u.b,{to:"/".concat(t.id),onClick:n,children:Object(Z.jsx)(O.a,{width:200,src:t.preview_url,preview:!1})})]})},Ie=l.a.Footer,ye=l.a.Content,Se=Object(pe.b)({resourceName:"images",resourceSelector:function(e,t){return t.content[e].reduce((function(e,t){return e[t.id]=t,e}),{})}}),Ee=Se.text,_e=Se.result,ke=Object(xe.a)([_e,function(e){return e.content.images},Ee],(function(e,t,n){return{imageIds:e,images:t.filter((function(t){return e.includes(t.id)})),searchText:n}})),Te=Object(pe.a)("images"),Ae=function(){var e=Object(o.g)(),t=Object(o.f)(),n=Object(g.b)(),r=Object(g.c)((function(e){return ke(e)})),c=r.images,i=r.searchText,u=new URLSearchParams(e.search),s=Number(u.get("page"))||1,b=Number(u.get("pageLimit"))||10,O=Object(a.useState)(s),f=Object(he.a)(O,2),v=f[0],m=f[1],p=Object(a.useState)(b),x=Object(he.a)(p,2),w=x[0],I=x[1],S=c.length*v+w,E=function(n,a,r){n(r),u.set(a,r),t.push({pathname:e.pathname,search:u.toString()})};return Object(a.useEffect)((function(){n(function(e){var t=e.page,n=e.limit;return{type:h,loading:!0,queryParams:{page:t,limit:n}}}({limit:w,page:v}))}),[v,w,n]),Object(Z.jsxs)(l.a,{className:"page",children:[Object(Z.jsx)(d.a,{title:"Content Creation Tool",subTitle:"based on picsum.photos",extra:Object(Z.jsx)(ve.a,{defaultValue:i,placeholder:"Search by author",onChange:function(e){return n(Te(e.target.value))}})}),Object(Z.jsx)(ye,{className:"content",children:Object(Z.jsx)(j.a,{children:c&&c.map((function(e){return Object(Z.jsx)(we,{image:e,onImageLinkClick:function(){return n({type:y,draftImage:e})}},e.id)}))})}),Object(Z.jsx)(Ie,{className:"footer",children:Object(Z.jsx)(me.a,{current:v,total:S,pageSize:w,onShowSizeChange:function(e,t){t!==w&&E(I,"pageLimit",t)},onChange:function(e){E(m,"page",e)},showSizeChanger:!0})})]})},Ce=n(236),Le={loading:!1,error:"",images:[],draftImage:null};var Ne,Ge=n(230),Me=n(231),Re=function(){function e(){Object(Ge.a)(this,e)}return Object(Me.a)(e,null,[{key:"clearItem",value:function(e){window.localStorage.removeItem(e)}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.localStorage.setItem(e,n?JSON.stringify(t):t)}},{key:"getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=window.localStorage.getItem(e);return t?JSON.parse(n):n}catch(a){return""}}}]),e}();Re.defaultKey="SAVED_IMAGES";var Fe={savedImages:null!==(Ne=Re.getItem(Re.defaultKey,!0))&&void 0!==Ne?Ne:[]};var Pe=Object(L.b)({content:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.loading,r=t.images,c=t.draftImage,i=t.error;switch(n){case h:return Object(s.a)(Object(s.a)({},e),{},{loading:a});case v:return Object(s.a)(Object(s.a)({},e),{},{images:r,loading:a});case m:return Object(s.a)(Object(s.a)({},e),{},{loading:a,error:i});case p:return Object(s.a)(Object(s.a)({},e),{},{loading:a});case x:return Object(s.a)(Object(s.a)({},e),{},{draftImage:c,loading:a});case w:return Object(s.a)(Object(s.a)({},e),{},{loading:a,error:i});case I:return Object(s.a)(Object(s.a)({},e),{},{draftImage:Object(s.a)(Object(s.a)({},e.draftImage),c)});case y:return Object(s.a)(Object(s.a)({},e),{},{draftImage:c});default:return e}},storage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.savedImages;switch(n){case q:return Object(s.a)({},e);case X:return Object(s.a)(Object(s.a)({},e),{},{savedImages:a});case H:return Object(s.a)({},e);default:return e}},search:pe.c}),Ue=A.a.mark(ze),Ve=A.a.mark(Je);function De(e,t){return t.reduce((function(t,n){var a,r,c=null!==(a=e.find((function(e){return e.id===n.id})))&&void 0!==a?a:{preview_url:(r=n.download_url,"".concat(F(F(r)),"/200"))};return t.push(Object(s.a)(Object(s.a)({},n),c)),t}),[])}function ze(e){var t,n;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e,a.next=3,Object(C.c)((function(e){return e.storage.savedImages}));case 3:return n=a.sent,a.next=6,Object(C.a)(De,n,e);case 6:return t=a.sent,a.next=9,Object(C.b)(S(t));case 9:case"end":return a.stop()}}),Ue)}var Be=V(D("/v2/list"),_,(function(e){return{type:m,error:e,loading:!1}}),ze);function Je(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.e)(h,U(Be));case 2:case"end":return e.stop()}}),Ve)}var Ke=A.a.mark(Xe),$e=A.a.mark(We);function qe(e,t){return e.find((function(e){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)}))}function Xe(e){var t,n;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(C.c)((function(e){return e.storage.savedImages}));case 2:if(t=a.sent,n={},!t.length){a.next=8;break}return a.next=7,Object(C.a)(qe,t,e);case 7:n=a.sent;case 8:return a.next=10,Object(C.b)(E(Object(s.a)(Object(s.a)({},e),n)));case 10:case"end":return a.stop()}}),Ke)}var He=V(D("/id"),_,(function(e){return{type:w,error:e,loading:!1}}),Xe);function We(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.e)(p,U(He));case 2:case"end":return e.stop()}}),$e)}var Ye=A.a.mark(et),Qe=A.a.mark(tt);function Ze(e,t){var n=Object(s.a)(Object(s.a)({},t),{},{preview_url:P(t.download_url)}),a=e.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==(null===t||void 0===t?void 0:t.id)}));return a.push(n),a}function et(e){var t,n,a;return A.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.image,r.next=3,Object(C.c)((function(e){return e.storage.savedImages}));case 3:return n=r.sent,r.next=6,Object(C.a)(Ze,n,t);case 6:return a=r.sent,r.next=9,Object(C.b)(W(a));case 9:return r.next=11,Object(C.a)(Re.setItem,Re.defaultKey,a,!0);case 11:case"end":return r.stop()}}),Ye)}function tt(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.e)(q,U(et));case 2:case"end":return e.stop()}}),Qe)}var nt=A.a.mark(at);function at(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)(Je);case 2:return e.next=4,Object(C.d)(We);case 4:return e.next=6,Object(C.d)(tt);case 6:case"end":return e.stop()}}),nt)}var rt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.c,ct=Object(Ce.a)(),it=Object(L.d)(Pe,rt(Object(L.a)(ct),Object(pe.d)({resourceIndexes:{images:["author"]},resourceSelector:function(e,t){return t.content[e]}})));ct.run(at);var ut=it;var ot=function(){return Object(Z.jsx)(g.a,{store:ut,children:Object(Z.jsx)(u.a,{basename:"/content-creation-tool",children:Object(Z.jsxs)(o.c,{children:[Object(Z.jsx)(o.a,{path:"/",exact:!0,children:Object(Z.jsx)(Ae,{})}),Object(Z.jsx)(o.a,{path:"/:imageId",exact:!0,children:Object(Z.jsx)(ge,{})})]})})})},st=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,403)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(Z.jsx)(r.a.StrictMode,{children:Object(Z.jsx)(ot,{})}),document.getElementById("root")),st()}},[[387,1,2]]]);
//# sourceMappingURL=main.ac96231d.chunk.js.map