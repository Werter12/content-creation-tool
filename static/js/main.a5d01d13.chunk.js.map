{"version":3,"sources":["redux/actions/images.js","redux/utils.js","redux/actions/storage.js","layouts/NoImage.js","components/DownloadImageButton.js","layouts/EditImageForm.js","pages/EditImagePage.js","components/ThumbnailImage.js","pages/MainPage.js","redux/reducers/image.js","redux/storage.js","redux/reducers/storage.js","redux/reducers/index.js","redux/sagas/listImagesSaga.js","redux/sagas/getImageSaga.js","redux/sagas/storageSaga.js","redux/sagas/index.js","redux/store.js","App.js","reportWebVitals.js","index.js"],"names":["LIST_IMAGES","LIST_IMAGES_RESULT","LIST_IMAGES_FAIL","GET_IMAGE","GET_IMAGE_RESULT","GET_IMAGE_FAIL","UPDATE_DRAFT_IMAGE","SET_DRAFT_IMAGE","emptyEvent","type","BASE_API_URL","commitError","error","args","console","log","cutUrl","url","substring","lastIndexOf","formatImageUrl","urlObj","URL","origin","pathname","search","sagaErrorBoundaries","saga","action","call","asyncFlow","apiFn","successAction","errorAction","postEffect","preEffect","preEffectParams","errorPostEffect","payload","data","put","callApi","path","method","queryParams","urlPath","axios","params","undefined","dimentionsPathDecorator","width","height","idPathDecorator","apiUrl","id","grayscalePathDecorator","grayscale","blurPathDecorator","blur","getUrl","START_SAVE_TO_STORAGE","SAVE_TO_STORAGE","GET_FROM_STORAGE","saveToStorage","savedImages","NoImage","Image","Text","Link","Typography","downloadImage","imageSrc","a","fetch","image","blob","imageBlob","imageURL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","DownloadImageButton","imageUrl","onClick","e","preventDefault","Paragraph","Title","validateMessages","range","EditImageForm","draftImage","onFinish","onValuesChange","donwloadImageUrl","xs","md","level","author","name","initialValues","Item","label","valuePropName","rules","min","max","direction","size","htmlType","Content","Layout","MainPage","dispatch","useDispatch","history","useHistory","imageId","useParams","useSelector","state","item","storage","loading","useEffect","builtImageUrl","compose","className","title","onBack","goBack","gutter","src","placeholder","values","startSaveToStorage","download_url","changedValues","attributes","ThumbnailImage","onImageLinkClick","to","preview_url","preview","Footer","getSearchSelectors","resourceName","resourceSelector","reduce","acc","elem","text","result","searchSelector","createSelector","items","itemIds","searchText","filter","includes","searchAction","createSearchAction","location","useLocation","images","urlSearchParams","URLSearchParams","pageParam","Number","get","pageLimitParam","useState","page","setPage","pageLimit","setPageLimit","setPagination","setPaginationFunc","pageAttribute","num","set","push","toString","limit","listImages","subTitle","extra","defaultValue","onChange","target","value","map","current","total","length","pageSize","onShowSizeChange","_","localPage","showSizeChanger","initialState","Storage","key","window","localStorage","removeItem","stringify","setItem","JSON","parse","getItem","defaultKey","combineReducers","searchReducer","mergeWithSavedImages","listImagesSaga","reduceImages","foundSavedImage","find","savedImage","readyImages","select","listImagesFlow","takeLatest","mergeWithSavedImage","getImageSaga","findSavedImage","getImageFlow","saveToStorageFlow","storageSaga","filterSavedImages","localImage","filtered","freshSavedImages","rootSaga","spawn","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","sagaMiddleware","createSagaMiddleware","store","createStore","reducers","applyMiddleware","reduxSearch","resourceIndexes","run","App","basename","exact","EditImagePage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a5d01d13.chunk.js","sourcesContent":["export const LIST_IMAGES = 'LIST_IMAGES';\nexport const LIST_IMAGES_RESULT = 'LIST_IMAGES_RESULT';\nexport const LIST_IMAGES_FAIL = 'LIST_IMAGES_FAIL';\nexport const GET_IMAGE = 'GET_IMAGE';\nexport const GET_IMAGE_RESULT = 'GET_IMAGE_RESULT';\nexport const GET_IMAGE_FAIL = 'GET_IMAGE_FAIL';\nexport const UPDATE_DRAFT_IMAGE = 'UPDATE_DRAFT_IMAGE';\nexport const SET_DRAFT_IMAGE = 'SET_DRAFT_IMAGE';\n\nexport function listImages({\n  page,\n  limit\n}) {\n  return {\n    type: LIST_IMAGES,\n    loading: true,\n    queryParams: {\n      page,\n      limit\n    }\n  };\n}\n\nexport function listImagesResult(items) {\n  return {\n    type: LIST_IMAGES_RESULT,\n    loading: false,\n    items\n  };\n}\n\nexport function listImagesFail(error) {\n  return {\n    type: LIST_IMAGES_FAIL,\n    error,\n    loading: false\n  };\n}\n\nexport function getImage(urlPath) {\n  return {\n    type: GET_IMAGE,\n    loading: true,\n    urlPath\n  };\n}\n\nexport function getImageResult(item) {\n  return {\n    type: GET_IMAGE_RESULT,\n    loading: false,\n    item\n  };\n}\n\nexport function getImageFail(error) {\n  return {\n    type: GET_IMAGE_FAIL,\n    error,\n    loading: false\n  };\n}\n\nexport function updateDraftImage(attributes) {\n  return {\n    type: UPDATE_DRAFT_IMAGE,\n    attributes\n  };\n}\n\nexport function setDraftImage(item) {\n  return {\n    type: SET_DRAFT_IMAGE,\n    item\n  };\n}\n\nexport function emptyEvent() {\n  return {\n    type: 'EMPTY_EVENT',\n  };\n}","import { call, put } from 'redux-saga/effects';\nimport { compose } from 'redux';\nimport axios from 'axios';\n\nconst BASE_API_URL = 'https://picsum.photos';\n\nfunction commitError(error, ...args) {\n  console.log('Saga Error: ', args, error);\n}\n\nconst cutUrl = (url) => url.substring(0, url.lastIndexOf('/'));\n\nexport const optimizeImage = (url) => {\n  return `${cutUrl(cutUrl(url))}/200`;\n};\n\nexport const formatImageUrl = (url) => {\n  const urlObj = new URL(url);\n  return `${urlObj.origin}${cutUrl(cutUrl(urlObj.pathname))}/200${\n    urlObj.search\n  }`;\n};\n\nexport const sagaErrorBoundaries = (saga, ...args) =>\n  function* (action) {\n    try {\n      yield call(saga, action, ...args);\n    } catch (err) {\n      yield call(commitError, err, ...args);\n    }\n  };\n\nexport function asyncFlow(\n  apiFn,\n  successAction,\n  errorAction,\n  postEffect = null,\n  preEffect = null,\n  preEffectParams = null,\n  errorPostEffect = null,\n) {\n  return function* (payload = null) {\n    try {\n      if (preEffect && preEffectParams) yield call(preEffect, preEffectParams);\n      // console.log('sagaAsyncPayload', payload);\n      const { data } = yield call(apiFn, payload);\n      // console.log('sagaAsyncResponse', data);\n\n      if (data) yield put(successAction(data));\n      if (postEffect) yield call(postEffect, data);\n      return data;\n    } catch (e) {\n      // console.log('sagaAsyncErr', e);\n      yield put(errorAction(e));\n      if (errorPostEffect) {\n        yield call(errorPostEffect);\n      }\n    }\n  };\n}\n\nexport const callApi =\n  (path = '', method = 'get') =>\n  ({ queryParams, urlPath }) =>\n    axios[method](\n      `${BASE_API_URL}${path}${urlPath ? `/${urlPath}` : ''}`,\n      queryParams ? { params: queryParams } : undefined,\n    );\n\nconst dimentionsPathDecorator = ({ width, height, url, ...params }) => {\n  return {\n    url: `${url}${width ? `/${width}` : ''}${height ? `/${height}` : ''}`,\n    ...params,\n  };\n};\n\nconst idPathDecorator = (apiUrl, { id, url, ...params }) => {\n  return { url: `${apiUrl}${id ? `/id/${id}` : ''}`, ...params };\n};\n\nconst grayscalePathDecorator = ({ grayscale, url, ...params }) => {\n  return {\n    url: `${url}${grayscale ? `?grayscale` : ''}`,\n    grayscale,\n    ...params,\n  };\n};\n\nconst blurPathDecorator = ({ blur, url, grayscale, ...params }) => {\n  if (blur > 10 && blur < 1) {\n    return { url, ...params };\n  }\n  return {\n    url: `${url}${blur ? `${grayscale ? '&' : '?'}blur=${blur}` : ''}`,\n    ...params,\n  };\n};\n\nconst getUrl = ({ url }) => {\n  return url;\n};\n\nexport const buildImageUrl = (params) => {\n  return compose(\n    getUrl,\n    blurPathDecorator,\n    grayscalePathDecorator,\n    dimentionsPathDecorator,\n    idPathDecorator,\n  )(BASE_API_URL, params);\n};\n","export const START_SAVE_TO_STORAGE = 'START_SAVE_TO_STORAGE';\nexport const SAVE_TO_STORAGE = 'SAVE_TO_STORAGE';\nexport const GET_FROM_STORAGE = 'GET_FROM_STORAGE';\n\nexport function startSaveToStorage(savedImages, image) {\n  return {\n    type: START_SAVE_TO_STORAGE,\n    savedImages,\n    image\n  };\n}\n\nexport function saveToStorage(savedImages) {\n  return {\n    type: SAVE_TO_STORAGE,\n    savedImages\n  };\n}\n\nexport function getFromStorage() {\n  return {\n    type: GET_FROM_STORAGE,\n  };\n}","import { Skeleton, Row, Col, Typography } from 'antd';\n\nfunction NoImage() {\n  return (\n    <Row>\n      <Col>\n        <Skeleton.Image />\n        <br />\n        <Typography.Text> No such image</Typography.Text>\n      </Col>\n    </Row>\n  );\n}\n\nexport default NoImage;\n","import { Typography } from 'antd';\n\nconst { Link } = Typography;\n\nasync function downloadImage(imageSrc) {\n  const image = await fetch(imageSrc);\n  const imageBlob = await image.blob();\n  const imageURL = URL.createObjectURL(imageBlob);\n  const link = document.createElement('a');\n  link.href = imageURL;\n  link.download = `${imageSrc}.jpg`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\nfunction DownloadImageButton({ imageUrl }) {\n  return (\n    <Link\n      href=\"#\"\n      onClick={async (e) => {\n        e.preventDefault();\n        await downloadImage(imageUrl);\n      }}\n    >\n      Download\n    </Link>\n  );\n}\n\nexport default DownloadImageButton;\n","import {\n  Typography,\n  Col,\n  Form,\n  Switch,\n  InputNumber,\n  Button,\n  Space,\n} from 'antd';\nimport DownloadImageButton from '../components/DownloadImageButton';\nconst { Paragraph, Title } = Typography;\n\nconst validateMessages = {\n  blur: {\n    // eslint-disable-next-line no-template-curly-in-string\n    range: '${label} must be between ${min} and ${max}',\n  },\n};\n\nfunction EditImageForm({\n  draftImage,\n  onFinish,\n  onValuesChange,\n  donwloadImageUrl,\n}) {\n  return (\n    <Col xs={24} md={12}>\n      <Title level={2}>Edit</Title>\n      <Paragraph>Author: {draftImage.author}</Paragraph>\n      <Form\n        name=\"edit-image\"\n        onFinish={onFinish}\n        validateMessages={validateMessages}\n        onValuesChange={onValuesChange}\n        initialValues={{\n          width: draftImage.width,\n          height: draftImage.height,\n          blur: draftImage.blur ?? 0,\n          grayscale: draftImage.grayscale ?? false,\n        }}\n      >\n        <Form.Item name=\"width\" label=\"Width\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item name=\"height\" label=\"Height\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Switch\" name=\"grayscale\" valuePropName=\"checked\">\n          <Switch />\n        </Form.Item>\n        <Form.Item\n          name=\"blur\"\n          label=\"Blur\"\n          rules={[\n            {\n              type: 'number',\n              min: 0,\n              max: 10,\n            },\n          ]}\n        >\n          <InputNumber />\n        </Form.Item>\n        <Space direction=\"vertical\" size=\"large\">\n          <DownloadImageButton imageUrl={donwloadImageUrl} />\n          <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Save\n            </Button>\n          </Form.Item>\n        </Space>\n      </Form>\n    </Col>\n  );\n}\n\nexport default EditImageForm;\n","import { useEffect } from 'react';\nimport { Layout, PageHeader, Image, Row, Col, Spin } from 'antd';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getImage, updateDraftImage } from '../redux/actions/images';\nimport { buildImageUrl } from '../redux/utils';\nimport { startSaveToStorage } from '../redux/actions/storage';\nimport NoImage from '../layouts/NoImage';\nimport EditImageForm from '../layouts/EditImageForm';\n\nconst { Content } = Layout;\n\nconst MainPage = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { imageId } = useParams();\n  const draftImage = useSelector((state) =>\n    state.image.item?.id === imageId ? state.image.item : null,\n  );\n  const savedImages = useSelector((state) => state.storage.savedImages);\n  const loading = useSelector((state) => state.image.loading);\n  useEffect(() => {\n    if (!draftImage) {\n      dispatch(getImage(`/${imageId}/info`));\n    }\n  }, [draftImage, imageId, dispatch]);\n\n  const builtImageUrl = buildImageUrl(draftImage ?? {});\n\n  const onFinish = (values) => {\n    dispatch(\n      startSaveToStorage(savedImages, {\n        ...draftImage,\n        ...values,\n        download_url: builtImageUrl,\n      }),\n    );\n  };\n\n  const onValuesChange = (changedValues) => {\n    if (changedValues.blur < 0 || changedValues.blur > 10) {\n      return;\n    }\n    dispatch(updateDraftImage(changedValues));\n  };\n\n  return (\n    <Layout className=\"page\">\n      <PageHeader title={`Image with ${imageId} id`}  onBack={() => history.goBack()} />\n      <Content className=\"content\">\n        {draftImage ? (\n          <Row gutter={[34, 16]}>\n            <Col xs={24} md={12} className=\"page-image-wrapper\">\n              <Image className=\"page-image\" src={builtImageUrl} placeholder />\n            </Col>\n            <EditImageForm\n              draftImage={draftImage}\n              onFinish={onFinish}\n              onValuesChange={onValuesChange}\n              donwloadImageUrl={builtImageUrl}\n            />\n          </Row>\n        ) : loading ? (\n          <Spin size=\"large\" />\n        ) : (\n          <NoImage />\n        )}\n      </Content>\n    </Layout>\n  );\n};\n\nexport default MainPage;\n","import { Image, Col } from 'antd';\nimport { Link } from 'react-router-dom';\n\nfunction ThumbnailImage({ image, onImageLinkClick }) {\n  return (\n    <Col>\n      <p>{image.author}</p>\n      <Link to={`/${image.id}`} onClick={onImageLinkClick}>\n        <Image width={200} src={image.preview_url} preview={false} />\n      </Link>\n    </Col>\n  );\n}\n\nexport default ThumbnailImage;\n","import { Layout, PageHeader, Row, Pagination, Input } from 'antd';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { listImages, setDraftImage } from '../redux/actions/images';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { createSearchAction, getSearchSelectors } from 'redux-search';\nimport { createSelector } from 'reselect';\nimport ThumbnailImage from '../components/ThumbnailImage';\n\nconst { Footer, Content } = Layout;\n\nconst items = (state) => state.image.items;\n\nconst { text, result } = getSearchSelectors({\n  resourceName: 'items',\n  resourceSelector: (resourceName, state) =>\n    state.image[resourceName].reduce((acc, elem) => {\n      acc[elem.id] = elem;\n      return acc;\n    }, {}),\n});\n\nconst searchSelector = createSelector(\n  [result, items, text],\n  (itemIds, items, searchText) => ({\n    itemIds,\n    items: items.filter((item) => {\n      return itemIds.includes(item.id);\n    }),\n    searchText,\n  }),\n);\nconst searchAction = createSearchAction('items');\n\nconst MainPage = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { items: images, searchText } = useSelector((state) =>\n    searchSelector(state),\n  );\n  const urlSearchParams = new URLSearchParams(location.search);\n  const pageParam = Number(urlSearchParams.get('page')) || 1;\n  const pageLimitParam = Number(urlSearchParams.get('pageLimit')) || 10;\n  const [page, setPage] = useState(pageParam);\n  const [pageLimit, setPageLimit] = useState(pageLimitParam);\n  const setPagination = (setPaginationFunc, pageAttribute, num) => {\n    setPaginationFunc(num);\n    urlSearchParams.set(pageAttribute, num);\n    history.push({\n      pathname: location.pathname,\n      search: urlSearchParams.toString(),\n    });\n  };\n  useEffect(() => {\n    dispatch(\n      listImages({\n        limit: pageLimit,\n        page: page,\n      }),\n    );\n  }, [page, pageLimit, dispatch]);\n\n  return (\n    <Layout className=\"page\">\n      <PageHeader\n        title=\"Content Creation Tool\"\n        subTitle=\"based on picsum.photos\"\n        extra={\n          <Input\n            defaultValue={searchText}\n            placeholder=\"Search by author\"\n            onChange={(e) => dispatch(searchAction(e.target.value))}\n          />\n        }\n      />\n      <Content className=\"content\">\n        <Row>\n          {images &&\n            images.map((image) => {\n              return (\n                <ThumbnailImage\n                  key={image.id}\n                  image={image}\n                  onImageLinkClick={() => dispatch(setDraftImage(image))}\n                />\n              );\n            })}\n        </Row>\n      </Content>\n      <Footer className=\"footer\">\n        <Pagination\n          current={page}\n          total={images && images.length * page + pageLimit}\n          pageSize={pageLimit}\n          onShowSizeChange={(_, pageSize) => {\n            if (pageSize !== pageLimit) {\n              setPagination(setPageLimit, 'pageLimit', pageSize);\n            }\n          }}\n          onChange={(localPage) => {\n            setPagination(setPage, 'page', localPage);\n          }}\n          showSizeChanger\n        />\n      </Footer>\n    </Layout>\n  );\n};\n\nexport default MainPage;\n","import {\n  LIST_IMAGES,\n  LIST_IMAGES_RESULT,\n  LIST_IMAGES_FAIL,\n  GET_IMAGE,\n  GET_IMAGE_RESULT,\n  GET_IMAGE_FAIL,\n  UPDATE_DRAFT_IMAGE,\n  SET_DRAFT_IMAGE,\n} from '../actions/images';\n\nconst initialState = {\n  loading: false,\n  error: '',\n  items: [],\n  item: null,\n};\n\nexport default function reducer(\n  state = initialState,\n  { type, loading, items, item, attributes, error },\n) {\n  switch (type) {\n    case LIST_IMAGES:\n      return {\n        ...state,\n        loading,\n      };\n    case LIST_IMAGES_RESULT:\n      return {\n        ...state,\n        items,\n        loading,\n      };\n    case LIST_IMAGES_FAIL:\n      return {\n        ...state,\n        loading,\n        error,\n      };\n    case GET_IMAGE:\n      return {\n        ...state,\n        loading,\n      };\n    case GET_IMAGE_RESULT:\n      return {\n        ...state,\n        item,\n        loading,\n      };\n    case GET_IMAGE_FAIL:\n      return {\n        ...state,\n        loading,\n        error,\n      };\n    case UPDATE_DRAFT_IMAGE:\n      return {\n        ...state,\n        item: {\n          ...state.item,\n          ...attributes,\n        },\n      };\n    case SET_DRAFT_IMAGE:\n      return {\n        ...state,\n        item,\n      };\n    default:\n      return state;\n  }\n}\n","export default class Storage {\n\n  static defaultKey = 'SAVED_IMAGES';\n\n  static clearItem(key) {\n    window.localStorage.removeItem(key);\n  }\n\n  static setItem(key, data, stringify = false) {\n    window.localStorage.setItem(key, stringify ? JSON.stringify(data) : data);\n  }\n\n  static getItem(key, parse = false) {\n    try {\n      const data = window.localStorage.getItem(key);\n      return parse ? JSON.parse(data) : data;\n    } catch (e) {\n      return '';\n    }\n  }\n}\n","import {\n  START_SAVE_TO_STORAGE,\n  SAVE_TO_STORAGE,\n  GET_FROM_STORAGE,\n} from '../actions/storage';\n\nimport Storage from '../storage';\n\nconst initialState = {\n  savedImages: Storage.getItem(Storage.defaultKey, true) ?? []\n};\n\nexport default function reducer(\n  state = initialState,\n  { type, savedImages }\n) {\n  switch (type) {\n    case START_SAVE_TO_STORAGE:\n      return {\n        ...state,\n      };\n    case SAVE_TO_STORAGE:\n      return {\n        ...state,\n        savedImages\n      };\n    case GET_FROM_STORAGE:\n      return {\n        ...state,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\n\nimport image from './image';\nimport storage from './storage';\nimport { reducer as searchReducer } from 'redux-search'\n\nexport default combineReducers({\n  image,\n  storage,\n  search: searchReducer\n});\n","import { takeLatest, select, put, call } from 'redux-saga/effects';\n\nimport {\n  LIST_IMAGES,\n  listImagesResult,\n  listImagesFail,\n  emptyEvent,\n} from '../actions/images';\nimport {\n  callApi,\n  asyncFlow,\n  optimizeImage,\n  sagaErrorBoundaries,\n} from '../utils';\n\nfunction reduceImages(savedImages, images) {\n  return images.reduce((acc, image) => {\n    const foundSavedImage = savedImages.find(\n      (savedImage) => savedImage.id === image.id,\n    ) ?? { preview_url: optimizeImage(image.download_url) };\n    acc.push({ ...image, ...foundSavedImage });\n    return acc;\n  }, []);\n}\n\nfunction* mergeWithSavedImages(images) {\n  let readyImages = images;\n  const savedImages = yield select((state) => state.storage.savedImages);\n  readyImages = yield call(reduceImages, savedImages, images);\n  yield put(listImagesResult(readyImages));\n}\n\nconst listImagesFlow = asyncFlow(\n  callApi('/v2/list'),\n  emptyEvent,\n  listImagesFail,\n  mergeWithSavedImages,\n);\n\nexport default function* listImagesSaga() {\n  yield takeLatest(LIST_IMAGES, sagaErrorBoundaries(listImagesFlow));\n}\n","import { takeLatest, select, put, call } from 'redux-saga/effects';\n\nimport {\n  GET_IMAGE,\n  getImageResult,\n  getImageFail,\n  emptyEvent,\n} from '../actions/images';\nimport { callApi, asyncFlow, sagaErrorBoundaries } from '../utils';\n\nfunction findSavedImage(savedImages, draftImage) {\n  return savedImages.find((savedImage) => {\n    return savedImage?.id === draftImage?.id;\n  });\n}\n\nfunction* mergeWithSavedImage(draftImage) {\n  const savedImages = yield select((state) => state.storage.savedImages);\n  let savedImage = {};\n  if (savedImages.length) {\n    savedImage = yield call(findSavedImage, savedImages, draftImage);\n  }\n  yield put(getImageResult({ ...draftImage, ...savedImage }));\n}\n\nconst getImageFlow = asyncFlow(\n  callApi('/id'),\n  emptyEvent,\n  getImageFail,\n  mergeWithSavedImage,\n);\n\nexport default function* getImageSaga() {\n  yield takeLatest(GET_IMAGE, sagaErrorBoundaries(getImageFlow));\n}\n","import { takeLatest, call, put, select } from 'redux-saga/effects';\nimport { START_SAVE_TO_STORAGE, saveToStorage } from '../actions/storage';\nimport { sagaErrorBoundaries, formatImageUrl } from '../utils';\n\nimport Storage from '../storage';\n\nfunction filterSavedImages(savedImages, image) {\n  const localImage = {\n    ...image,\n    preview_url: formatImageUrl(image.download_url),\n  };\n  const filtered = savedImages.filter(\n    (savedImage) => savedImage?.id !== image?.id,\n  );\n  filtered.push(localImage);\n  return filtered;\n}\n\nfunction* saveToStorageFlow({ image }) {\n  const savedImages = yield select((state) => state.storage.savedImages);\n  const freshSavedImages = yield call(filterSavedImages, savedImages, image);\n  yield put(saveToStorage(freshSavedImages));\n  yield call(Storage.setItem, Storage.defaultKey, freshSavedImages, true);\n}\n\nexport default function* storageSaga() {\n  yield takeLatest(\n    START_SAVE_TO_STORAGE,\n    sagaErrorBoundaries(saveToStorageFlow),\n  );\n}\n","import { spawn } from 'redux-saga/effects';\n\nimport listImagesSaga from './listImagesSaga';\nimport getImageSaga from './getImageSaga';\nimport storageSaga from './storageSaga';\n\nexport default function* rootSaga() {\n  yield spawn(listImagesSaga);\n  yield spawn(getImageSaga);\n  yield spawn(storageSaga);\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { reduxSearch } from 'redux-search';\n\nimport reducers from './reducers';\nimport rootSaga from './sagas';\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = createStore(\n  reducers,\n  composeEnhancers(\n    applyMiddleware(sagaMiddleware),\n    reduxSearch({\n      resourceIndexes: {\n        items: ['author'],\n      },\n      resourceSelector: (resourceName, state) => {\n        return state.image[resourceName];\n      },\n    }),\n  ),\n);\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","import './App.scss';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { MainPage, EditImagePage } from './pages';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Router basename=\"/content-creation-tool\">\n        <Route path=\"/\" exact>\n          <MainPage />\n        </Route>\n        <Route path=\"/:imageId\" exact>\n          <EditImagePage />\n        </Route>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}