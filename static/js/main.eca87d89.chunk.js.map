{"version":3,"sources":["redux/actions/content.js","redux/utils.js","redux/actions/storage.js","layouts/NoImage.js","components/DownloadImageButton.js","layouts/EditImageForm.js","pages/EditImagePage.js","components/ThumbnailImage.js","pages/MainPage.js","redux/reducers/content.js","redux/storage.js","redux/reducers/storage.js","redux/reducers/index.js","redux/sagas/listImagesSaga.js","redux/sagas/getImageSaga.js","redux/sagas/storageSaga.js","redux/sagas/index.js","redux/store.js","App.js","reportWebVitals.js","index.js"],"names":["LIST_IMAGES","LIST_IMAGES_RESULT","LIST_IMAGES_FAIL","GET_IMAGE","GET_IMAGE_RESULT","GET_IMAGE_FAIL","UPDATE_DRAFT_IMAGE","SET_DRAFT_IMAGE","listImagesResult","images","type","loading","getImageResult","draftImage","emptyEvent","BASE_API_URL","commitError","error","args","console","log","cutUrl","url","substring","lastIndexOf","formatImageUrl","urlObj","URL","origin","pathname","search","sagaErrorBoundaries","saga","action","call","asyncFlow","apiFn","successAction","errorAction","postEffect","preEffect","preEffectParams","errorPostEffect","payload","data","put","callApi","path","method","queryParams","urlPath","axios","params","undefined","dimentionsPathDecorator","width","height","idPathDecorator","apiUrl","id","grayscalePathDecorator","grayscale","blurPathDecorator","blur","getUrl","START_SAVE_TO_STORAGE","SAVE_TO_STORAGE","GET_FROM_STORAGE","saveToStorage","savedImages","NoImage","Image","Text","Link","Typography","downloadImage","imageSrc","a","fetch","image","blob","imageBlob","imageURL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","DownloadImageButton","imageUrl","onClick","e","preventDefault","Paragraph","Title","validateMessages","range","EditImageForm","onFinish","onValuesChange","donwloadImageUrl","xs","md","level","author","name","initialValues","Item","label","valuePropName","rules","min","max","direction","size","htmlType","Content","Layout","MainPage","dispatch","useDispatch","history","useHistory","imageId","useParams","useSelector","state","content","useEffect","builtImageUrl","compose","className","title","onBack","goBack","gutter","src","placeholder","values","download_url","changedValues","updateDraftImage","ThumbnailImage","onImageLinkClick","to","preview_url","preview","Footer","getSearchSelectors","resourceName","resourceSelector","reduce","acc","elem","text","result","searchSelector","createSelector","imageIds","searchText","filter","includes","searchAction","createSearchAction","location","useLocation","urlSearchParams","URLSearchParams","pageParam","Number","get","pageLimitParam","useState","page","setPage","pageLimit","setPageLimit","totalImages","length","setPagination","setPaginationFunc","pageAttribute","num","set","push","toString","limit","listImages","subTitle","extra","defaultValue","onChange","target","value","map","current","total","pageSize","onShowSizeChange","_","localPage","showSizeChanger","initialState","Storage","key","window","localStorage","removeItem","stringify","setItem","JSON","parse","getItem","defaultKey","combineReducers","storage","searchReducer","mergeWithSavedImages","listImagesSaga","reduceImages","foundSavedImage","find","savedImage","readyImages","select","listImagesFlow","takeLatest","mergeWithSavedImage","getImageSaga","findSavedImage","getImageFlow","saveToStorageFlow","storageSaga","filterSavedImages","localImage","filtered","freshSavedImages","rootSaga","spawn","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","sagaMiddleware","createSagaMiddleware","store","createStore","reducers","applyMiddleware","reduxSearch","resourceIndexes","run","App","basename","exact","EditImagePage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.eca87d89.chunk.js","sourcesContent":["export const LIST_IMAGES = 'LIST_IMAGES';\nexport const LIST_IMAGES_RESULT = 'LIST_IMAGES_RESULT';\nexport const LIST_IMAGES_FAIL = 'LIST_IMAGES_FAIL';\nexport const GET_IMAGE = 'GET_IMAGE';\nexport const GET_IMAGE_RESULT = 'GET_IMAGE_RESULT';\nexport const GET_IMAGE_FAIL = 'GET_IMAGE_FAIL';\nexport const UPDATE_DRAFT_IMAGE = 'UPDATE_DRAFT_IMAGE';\nexport const SET_DRAFT_IMAGE = 'SET_DRAFT_IMAGE';\n\nexport function listImages({\n  page,\n  limit\n}) {\n  return {\n    type: LIST_IMAGES,\n    loading: true,\n    queryParams: {\n      page,\n      limit\n    }\n  };\n}\n\nexport function listImagesResult(images) {\n  return {\n    type: LIST_IMAGES_RESULT,\n    loading: false,\n    images\n  };\n}\n\nexport function listImagesFail(error) {\n  return {\n    type: LIST_IMAGES_FAIL,\n    error,\n    loading: false\n  };\n}\n\nexport function getImage(urlPath) {\n  return {\n    type: GET_IMAGE,\n    loading: true,\n    urlPath\n  };\n}\n\nexport function getImageResult(draftImage) {\n  return {\n    type: GET_IMAGE_RESULT,\n    loading: false,\n    draftImage\n  };\n}\n\nexport function getImageFail(error) {\n  return {\n    type: GET_IMAGE_FAIL,\n    error,\n    loading: false\n  };\n}\n\nexport function updateDraftImage(draftImage) {\n  return {\n    type: UPDATE_DRAFT_IMAGE,\n    draftImage\n  };\n}\n\nexport function setDraftImage(draftImage) {\n  return {\n    type: SET_DRAFT_IMAGE,\n    draftImage\n  };\n}\n\nexport function emptyEvent() {\n  return {\n    type: 'EMPTY_EVENT',\n  };\n}","import { call, put } from 'redux-saga/effects';\nimport { compose } from 'redux';\nimport axios from 'axios';\n\nconst BASE_API_URL = 'https://picsum.photos';\n\nfunction commitError(error, ...args) {\n  console.log('Saga Error: ', args, error);\n}\n\nconst cutUrl = (url) => url.substring(0, url.lastIndexOf('/'));\n\nexport const optimizeImage = (url) => {\n  return `${cutUrl(cutUrl(url))}/200`;\n};\n\nexport const formatImageUrl = (url) => {\n  const urlObj = new URL(url);\n  return `${urlObj.origin}${cutUrl(cutUrl(urlObj.pathname))}/200${\n    urlObj.search\n  }`;\n};\n\nexport const sagaErrorBoundaries = (saga, ...args) =>\n  function* (action) {\n    try {\n      yield call(saga, action, ...args);\n    } catch (err) {\n      yield call(commitError, err, ...args);\n    }\n  };\n\nexport function asyncFlow(\n  apiFn,\n  successAction,\n  errorAction,\n  postEffect = null,\n  preEffect = null,\n  preEffectParams = null,\n  errorPostEffect = null,\n) {\n  return function* (payload = null) {\n    try {\n      if (preEffect && preEffectParams) yield call(preEffect, preEffectParams);\n      // console.log('sagaAsyncPayload', payload);\n      const { data } = yield call(apiFn, payload);\n      // console.log('sagaAsyncResponse', data);\n\n      if (data) yield put(successAction(data));\n      if (postEffect) yield call(postEffect, data);\n      return data;\n    } catch (e) {\n      // console.log('sagaAsyncErr', e);\n      yield put(errorAction(e));\n      if (errorPostEffect) {\n        yield call(errorPostEffect);\n      }\n    }\n  };\n}\n\nexport const callApi =\n  (path = '', method = 'get') =>\n  ({ queryParams, urlPath }) =>\n    axios[method](\n      `${BASE_API_URL}${path}${urlPath ? `/${urlPath}` : ''}`,\n      queryParams ? { params: queryParams } : undefined,\n    );\n\nconst dimentionsPathDecorator = ({ width, height, url, ...params }) => {\n  return {\n    url: `${url}${width ? `/${width}` : ''}${height ? `/${height}` : ''}`,\n    ...params,\n  };\n};\n\nconst idPathDecorator = (apiUrl, { id, url, ...params }) => {\n  return { url: `${apiUrl}${id ? `/id/${id}` : ''}`, ...params };\n};\n\nconst grayscalePathDecorator = ({ grayscale, url, ...params }) => {\n  return {\n    url: `${url}${grayscale ? `?grayscale` : ''}`,\n    grayscale,\n    ...params,\n  };\n};\n\nconst blurPathDecorator = ({ blur, url, grayscale, ...params }) => {\n  if (blur > 10 && blur < 1) {\n    return { url, ...params };\n  }\n  return {\n    url: `${url}${blur ? `${grayscale ? '&' : '?'}blur=${blur}` : ''}`,\n    ...params,\n  };\n};\n\nconst getUrl = ({ url }) => {\n  return url;\n};\n\nexport const buildImageUrl = (params) => {\n  return compose(\n    getUrl,\n    blurPathDecorator,\n    grayscalePathDecorator,\n    dimentionsPathDecorator,\n    idPathDecorator,\n  )(BASE_API_URL, params);\n};\n","export const START_SAVE_TO_STORAGE = 'START_SAVE_TO_STORAGE';\nexport const SAVE_TO_STORAGE = 'SAVE_TO_STORAGE';\nexport const GET_FROM_STORAGE = 'GET_FROM_STORAGE';\n\nexport function startSaveToStorage(image) {\n  return {\n    type: START_SAVE_TO_STORAGE,\n    image\n  };\n}\n\nexport function saveToStorage(savedImages) {\n  return {\n    type: SAVE_TO_STORAGE,\n    savedImages\n  };\n}\n\nexport function getFromStorage() {\n  return {\n    type: GET_FROM_STORAGE,\n  };\n}","import { Skeleton, Row, Col, Typography } from 'antd';\n\nfunction NoImage() {\n  return (\n    <Row>\n      <Col>\n        <Skeleton.Image />\n        <br />\n        <Typography.Text> No such image</Typography.Text>\n      </Col>\n    </Row>\n  );\n}\n\nexport default NoImage;\n","import { Typography } from 'antd';\n\nconst { Link } = Typography;\n\nasync function downloadImage(imageSrc) {\n  const image = await fetch(imageSrc);\n  const imageBlob = await image.blob();\n  const imageURL = URL.createObjectURL(imageBlob);\n  const link = document.createElement('a');\n  link.href = imageURL;\n  link.download = `${imageSrc}.jpg`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\nfunction DownloadImageButton({ imageUrl }) {\n  return (\n    <Link\n      href=\"#\"\n      onClick={async (e) => {\n        e.preventDefault();\n        await downloadImage(imageUrl);\n      }}\n    >\n      Download\n    </Link>\n  );\n}\n\nexport default DownloadImageButton;\n","import {\n  Typography,\n  Col,\n  Form,\n  Switch,\n  InputNumber,\n  Button,\n  Space,\n} from 'antd';\nimport DownloadImageButton from '../components/DownloadImageButton';\nconst { Paragraph, Title } = Typography;\n\nconst validateMessages = {\n  blur: {\n    // eslint-disable-next-line no-template-curly-in-string\n    range: '${label} must be between ${min} and ${max}',\n  },\n};\n\nfunction EditImageForm({\n  draftImage,\n  onFinish,\n  onValuesChange,\n  donwloadImageUrl,\n}) {\n  return (\n    <Col xs={24} md={12}>\n      <Title level={2}>Edit</Title>\n      <Paragraph>Author: {draftImage.author}</Paragraph>\n      <Form\n        name=\"edit-image\"\n        onFinish={onFinish}\n        validateMessages={validateMessages}\n        onValuesChange={onValuesChange}\n        initialValues={{\n          width: draftImage.width,\n          height: draftImage.height,\n          blur: draftImage.blur ?? 0,\n          grayscale: draftImage.grayscale ?? false,\n        }}\n      >\n        <Form.Item name=\"width\" label=\"Width\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item name=\"height\" label=\"Height\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Switch\" name=\"grayscale\" valuePropName=\"checked\">\n          <Switch />\n        </Form.Item>\n        <Form.Item\n          name=\"blur\"\n          label=\"Blur\"\n          rules={[\n            {\n              type: 'number',\n              min: 0,\n              max: 10,\n            },\n          ]}\n        >\n          <InputNumber />\n        </Form.Item>\n        <Space direction=\"vertical\" size=\"large\">\n          <DownloadImageButton imageUrl={donwloadImageUrl} />\n          <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Save\n            </Button>\n          </Form.Item>\n        </Space>\n      </Form>\n    </Col>\n  );\n}\n\nexport default EditImageForm;\n","import { useEffect } from 'react';\nimport { Layout, PageHeader, Image, Row, Col, Spin } from 'antd';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getImage, updateDraftImage } from '../redux/actions/content';\nimport { buildImageUrl } from '../redux/utils';\nimport { startSaveToStorage } from '../redux/actions/storage';\nimport NoImage from '../layouts/NoImage';\nimport EditImageForm from '../layouts/EditImageForm';\n\nconst { Content } = Layout;\n\nconst MainPage = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { imageId } = useParams();\n  const draftImage = useSelector((state) =>\n    state.content?.draftImage?.id === imageId ? state.content.draftImage : null,\n  );\n  const loading = useSelector((state) => state.content.loading);\n  useEffect(() => {\n    if (!draftImage) {\n      dispatch(getImage(`/${imageId}/info`));\n    }\n  }, [draftImage, imageId, dispatch]);\n\n  const builtImageUrl = buildImageUrl(draftImage ?? {});\n\n  const onFinish = (values) => {\n    dispatch(\n      startSaveToStorage({\n        ...draftImage,\n        ...values,\n        download_url: builtImageUrl,\n      }),\n    );\n  };\n\n  const onValuesChange = (changedValues) => {\n    if (changedValues.blur < 0 || changedValues.blur > 10) {\n      return;\n    }\n    dispatch(updateDraftImage(changedValues));\n  };\n\n  return (\n    <Layout className=\"page\">\n      <PageHeader\n        title={`Image with ${imageId} id`}\n        onBack={() => history.goBack()}\n      />\n      <Content className=\"content\">\n        {draftImage ? (\n          <Row gutter={[34, 16]}>\n            <Col xs={24} md={12} className=\"page-image-wrapper\">\n              <Image className=\"page-image\" src={builtImageUrl} placeholder />\n            </Col>\n            <EditImageForm\n              draftImage={draftImage}\n              onFinish={onFinish}\n              onValuesChange={onValuesChange}\n              donwloadImageUrl={builtImageUrl}\n            />\n          </Row>\n        ) : loading ? (\n          <Spin size=\"large\" />\n        ) : (\n          <NoImage />\n        )}\n      </Content>\n    </Layout>\n  );\n};\n\nexport default MainPage;\n","import { Image, Col } from 'antd';\nimport { Link } from 'react-router-dom';\n\nfunction ThumbnailImage({ image, onImageLinkClick }) {\n  return (\n    <Col>\n      <p>{image.author}</p>\n      <Link to={`/${image.id}`} onClick={onImageLinkClick}>\n        <Image width={200} src={image.preview_url} preview={false} />\n      </Link>\n    </Col>\n  );\n}\n\nexport default ThumbnailImage;\n","import { Layout, PageHeader, Row, Pagination, Input } from 'antd';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { listImages, setDraftImage } from '../redux/actions/content';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { createSearchAction, getSearchSelectors } from 'redux-search';\nimport { createSelector } from 'reselect';\nimport ThumbnailImage from '../components/ThumbnailImage';\n\nconst { Footer, Content } = Layout;\n\nconst imagesSelector = (state) => state.content.images;\n\nconst { text, result } = getSearchSelectors({\n  resourceName: 'images',\n  resourceSelector: (resourceName, state) =>\n    state.content[resourceName].reduce((acc, elem) => {\n      acc[elem.id] = elem;\n      return acc;\n    }, {}),\n});\n\nconst searchSelector = createSelector(\n  [result, imagesSelector, text],\n  (imageIds, images, searchText) => ({\n    imageIds,\n    images: images.filter((image) => {\n      return imageIds.includes(image.id);\n    }),\n    searchText,\n  }),\n);\nconst searchAction = createSearchAction('images');\n\nconst MainPage = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { images, searchText } = useSelector((state) =>\n    searchSelector(state),\n  );\n  const urlSearchParams = new URLSearchParams(location.search);\n  const pageParam = Number(urlSearchParams.get('page')) || 1;\n  const pageLimitParam = Number(urlSearchParams.get('pageLimit')) || 10;\n  const [page, setPage] = useState(pageParam);\n  const [pageLimit, setPageLimit] = useState(pageLimitParam);\n  const totalImages = images.length * page + pageLimit;\n  const setPagination = (setPaginationFunc, pageAttribute, num) => {\n    setPaginationFunc(num);\n    urlSearchParams.set(pageAttribute, num);\n    history.push({\n      pathname: location.pathname,\n      search: urlSearchParams.toString(),\n    });\n  };\n  useEffect(() => {\n    dispatch(\n      listImages({\n        limit: pageLimit,\n        page: page,\n      }),\n    );\n  }, [page, pageLimit, dispatch]);\n\n  return (\n    <Layout className=\"page\">\n      <PageHeader\n        title=\"Content Creation Tool\"\n        subTitle=\"based on picsum.photos\"\n        extra={\n          <Input\n            defaultValue={searchText}\n            placeholder=\"Search by author\"\n            onChange={(e) => dispatch(searchAction(e.target.value))}\n          />\n        }\n      />\n      <Content className=\"content\">\n        <Row>\n          {images &&\n            images.map((image) => {\n              return (\n                <ThumbnailImage\n                  key={image.id}\n                  image={image}\n                  onImageLinkClick={() => dispatch(setDraftImage(image))}\n                />\n              );\n            })}\n        </Row>\n      </Content>\n      <Footer className=\"footer\">\n        <Pagination\n          current={page}\n          total={totalImages}\n          pageSize={pageLimit}\n          onShowSizeChange={(_, pageSize) => {\n            if (pageSize !== pageLimit) {\n              setPagination(setPageLimit, 'pageLimit', pageSize);\n            }\n          }}\n          onChange={(localPage) => {\n            setPagination(setPage, 'page', localPage);\n          }}\n          showSizeChanger\n        />\n      </Footer>\n    </Layout>\n  );\n};\n\nexport default MainPage;\n","import {\n  LIST_IMAGES,\n  LIST_IMAGES_RESULT,\n  LIST_IMAGES_FAIL,\n  GET_IMAGE,\n  GET_IMAGE_RESULT,\n  GET_IMAGE_FAIL,\n  UPDATE_DRAFT_IMAGE,\n  SET_DRAFT_IMAGE,\n} from '../actions/content';\n\nconst initialState = {\n  loading: false,\n  error: '',\n  images: [],\n  draftImage: null,\n};\n\nexport default function reducer(\n  state = initialState,\n  { type, loading, images, draftImage, error },\n) {\n  switch (type) {\n    case LIST_IMAGES:\n      return {\n        ...state,\n        loading,\n      };\n    case LIST_IMAGES_RESULT:\n      return {\n        ...state,\n        images,\n        loading,\n      };\n    case LIST_IMAGES_FAIL:\n      return {\n        ...state,\n        loading,\n        error,\n      };\n    case GET_IMAGE:\n      return {\n        ...state,\n        loading,\n      };\n    case GET_IMAGE_RESULT:\n      return {\n        ...state,\n        draftImage,\n        loading,\n      };\n    case GET_IMAGE_FAIL:\n      return {\n        ...state,\n        loading,\n        error,\n      };\n    case UPDATE_DRAFT_IMAGE:\n      return {\n        ...state,\n        draftImage: {\n          ...state.draftImage,\n          ...draftImage,\n        },\n      };\n    case SET_DRAFT_IMAGE:\n      return {\n        ...state,\n        draftImage,\n      };\n    default:\n      return state;\n  }\n}\n","export default class Storage {\n\n  static defaultKey = 'SAVED_IMAGES';\n\n  static clearItem(key) {\n    window.localStorage.removeItem(key);\n  }\n\n  static setItem(key, data, stringify = false) {\n    window.localStorage.setItem(key, stringify ? JSON.stringify(data) : data);\n  }\n\n  static getItem(key, parse = false) {\n    try {\n      const data = window.localStorage.getItem(key);\n      return parse ? JSON.parse(data) : data;\n    } catch (e) {\n      return '';\n    }\n  }\n}\n","import {\n  START_SAVE_TO_STORAGE,\n  SAVE_TO_STORAGE,\n  GET_FROM_STORAGE,\n} from '../actions/storage';\n\nimport Storage from '../storage';\n\nconst initialState = {\n  savedImages: Storage.getItem(Storage.defaultKey, true) ?? []\n};\n\nexport default function reducer(\n  state = initialState,\n  { type, savedImages }\n) {\n  switch (type) {\n    case START_SAVE_TO_STORAGE:\n      return {\n        ...state,\n      };\n    case SAVE_TO_STORAGE:\n      return {\n        ...state,\n        savedImages\n      };\n    case GET_FROM_STORAGE:\n      return {\n        ...state,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\n\nimport content from './content';\nimport storage from './storage';\nimport { reducer as searchReducer } from 'redux-search'\n\nexport default combineReducers({\n  content,\n  storage,\n  search: searchReducer\n});\n","import { takeLatest, select, put, call } from 'redux-saga/effects';\n\nimport {\n  LIST_IMAGES,\n  listImagesResult,\n  listImagesFail,\n  emptyEvent,\n} from '../actions/content';\nimport {\n  callApi,\n  asyncFlow,\n  optimizeImage,\n  sagaErrorBoundaries,\n} from '../utils';\n\nfunction reduceImages(savedImages, images) {\n  return images.reduce((acc, image) => {\n    const foundSavedImage = savedImages.find(\n      (savedImage) => savedImage.id === image.id,\n    ) ?? { preview_url: optimizeImage(image.download_url) };\n    acc.push({ ...image, ...foundSavedImage });\n    return acc;\n  }, []);\n}\n\nfunction* mergeWithSavedImages(images) {\n  let readyImages = images;\n  const savedImages = yield select((state) => state.storage.savedImages);\n  readyImages = yield call(reduceImages, savedImages, images);\n  yield put(listImagesResult(readyImages));\n}\n\nconst listImagesFlow = asyncFlow(\n  callApi('/v2/list'),\n  emptyEvent,\n  listImagesFail,\n  mergeWithSavedImages,\n);\n\nexport default function* listImagesSaga() {\n  yield takeLatest(LIST_IMAGES, sagaErrorBoundaries(listImagesFlow));\n}\n","import { takeLatest, select, put, call } from 'redux-saga/effects';\n\nimport {\n  GET_IMAGE,\n  getImageResult,\n  getImageFail,\n  emptyEvent,\n} from '../actions/content';\nimport { callApi, asyncFlow, sagaErrorBoundaries } from '../utils';\n\nfunction findSavedImage(savedImages, draftImage) {\n  return savedImages.find((savedImage) => {\n    return savedImage?.id === draftImage?.id;\n  });\n}\n\nfunction* mergeWithSavedImage(draftImage) {\n  const savedImages = yield select((state) => state.storage.savedImages);\n  let savedImage = {};\n  if (savedImages.length) {\n    savedImage = yield call(findSavedImage, savedImages, draftImage);\n  }\n  yield put(getImageResult({ ...draftImage, ...savedImage }));\n}\n\nconst getImageFlow = asyncFlow(\n  callApi('/id'),\n  emptyEvent,\n  getImageFail,\n  mergeWithSavedImage,\n);\n\nexport default function* getImageSaga() {\n  yield takeLatest(GET_IMAGE, sagaErrorBoundaries(getImageFlow));\n}\n","import { takeLatest, call, put, select } from 'redux-saga/effects';\nimport { START_SAVE_TO_STORAGE, saveToStorage } from '../actions/storage';\nimport { sagaErrorBoundaries, formatImageUrl } from '../utils';\n\nimport Storage from '../storage';\n\nfunction filterSavedImages(savedImages, image) {\n  const localImage = {\n    ...image,\n    preview_url: formatImageUrl(image.download_url),\n  };\n  const filtered = savedImages.filter(\n    (savedImage) => savedImage?.id !== image?.id,\n  );\n  filtered.push(localImage);\n  return filtered;\n}\n\nfunction* saveToStorageFlow({ image }) {\n  const savedImages = yield select((state) => state.storage.savedImages);\n  const freshSavedImages = yield call(filterSavedImages, savedImages, image);\n  yield put(saveToStorage(freshSavedImages));\n  yield call(Storage.setItem, Storage.defaultKey, freshSavedImages, true);\n}\n\nexport default function* storageSaga() {\n  yield takeLatest(\n    START_SAVE_TO_STORAGE,\n    sagaErrorBoundaries(saveToStorageFlow),\n  );\n}\n","import { spawn } from 'redux-saga/effects';\n\nimport listImagesSaga from './listImagesSaga';\nimport getImageSaga from './getImageSaga';\nimport storageSaga from './storageSaga';\n\nexport default function* rootSaga() {\n  yield spawn(listImagesSaga);\n  yield spawn(getImageSaga);\n  yield spawn(storageSaga);\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { reduxSearch } from 'redux-search';\n\nimport reducers from './reducers';\nimport rootSaga from './sagas';\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = createStore(\n  reducers,\n  composeEnhancers(\n    applyMiddleware(sagaMiddleware),\n    reduxSearch({\n      resourceIndexes: {\n        images: ['author'],\n      },\n      resourceSelector: (resourceName, state) => {\n        return state.content[resourceName];\n      },\n    }),\n  ),\n);\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","import './App.scss';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { MainPage, EditImagePage } from './pages';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Router basename=\"/content-creation-tool\">\n        <Route path=\"/\" exact>\n          <MainPage />\n        </Route>\n        <Route path=\"/:imageId\" exact>\n          <EditImagePage />\n        </Route>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}